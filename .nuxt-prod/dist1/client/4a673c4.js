(window.webpackJsonp=window.webpackJsonp||[]).push([[138,56],{1250:function(e,t,n){"use strict";n.r(t);var o=n(116),r=n(133),l=n(94),d=n(511),c=n(849),m=n(1220),h=n(349),_=n(115),v=n(327),f=n(208),y=n(26),k=n(835),x=n(510),I=n(846),D=n(348),w=n(218),A=n(95),C=n(850),S=n(829),$=(n(35),n(6),n(36),n(72),n(57),n(219),n(220),n(33),n(269),n(355)),E={components:{TiptapVuetify:$.p},data:function(){return{formTitle:"New Leave Type",dialogEmployees:!1,idsEmployeeList:[],datatable_search_textbox:"",filter_employeeid:"",snack:!1,snackColor:"",snackText:"",extensions:[$.g,$.a,$.k,$.i,$.r,$.o,$.j,$.l,$.c,$.m,[$.f,{options:{levels:[1,2,3]}}],$.b,$.k,$.d,$.h,$.n,$.e],content:"\n      <h1>Yay Headlines!</h1>\n      <p>All these <strong>cool tags</strong> are working now.</p>\n        ",scrollInvoked:0,start_menu:!1,end_menu:!1,title:"",des:"",desDate:"",dept:"",options:{},Model:"Leave Type",endpoint:"leave_type",search:"",snackbar:!1,dialog:!1,ids:[],departments:[],loading:!1,total:0,headers:[{text:"Name",align:"left",sortable:!0,key:"name",value:"name"},{text:"Short Name",align:"left",sortable:!0,value:"short_name"},{text:"Actions",align:"center",value:"action",sortable:!1}],editedIndex:-1,editedItem:{name:"",short_name:""},defaultItem:{name:"",short_name:""},response:"",data:[],errors:[],options_dialog:{},employees_dialog:[],selectAllDepartment:!1,selectAllEmployee:!1,DialogEmployeesData:{}}},computed:{},watch:{},created:function(){this.loading=!0,this.getDataFromApi()},methods:{newDialog:function(){this.formTitle="New Leave Type",this.errors=[],this.editedIndex=-1,this.editedItem={name:"",short_name:""},this.defaultItem={name:"",short_name:""},this.dialog=!0},update_EdititemStart:function(){this.$refs.from_menu.save(this.editedItem.start_date),this.from_menu=!1,this.getDayscount()},update_EdititemEnd:function(){this.$refs.end_menu.save(this.editedItem.end_date),this.end_menu=!1,this.getDayscount()},getDayscount:function(){if(!this.editedItem.start_date||!this.editedItem.end_date)return!1;var e=new Date(this.editedItem.start_date),t=new Date(this.editedItem.end_date);this.editedItem.year=t.getFullYear();var n=Math.abs(t.getTime()-e.getTime()),o=Math.ceil(n/864e5);this.editedItem.total_days=o+1},gotoDialogPage:function(e){this.DialogEmployeesData=e.employees,this.dialogEmployees=!0},datatable_save:function(){},datatable_cancel:function(){this.datatable_search_textbox=""},datatable_open:function(){this.datatable_search_textbox=""},datatable_close:function(){this.loading=!1},toggleDepartmentSelection:function(){this.selectAllDepartment=!this.selectAllDepartment},toggleEmployeeSelection:function(){this.selectAllEmployee=!this.selectAllEmployee},can:function(e){var u=this.$auth.user;return u&&u.permissions.some((function(t){return t==e||"/"==e}))||u.is_master},onScroll:function(){this.scrollInvoked++},getDepartments:function(){var e=this,t={params:{per_page:1e3,company_id:this.$auth.user.company_id}};this.$axios.get("departments",t).then((function(t){var data=t.data;e.departments=data.data}))},employeesByDepartment:function(){var e=this;this.loading_dialog=!0;var t=this.options_dialog,n=t.page,o=t.itemsPerPage,r={params:{department_ids:this.editedItem.departments,per_page:o,page:n,company_id:this.$auth.user.company_id}};this.editedItem.departments.length?this.$axios.get("employeesByDepartment",r).then((function(t){var data=t.data;e.employees_dialog=data.data,e.loading_dialog=!1})):this.getEmployees()},getDataFromApi:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.endpoint,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";""==t&&(t=this.endpoint),this.loading=!0;var r=new Date,l=this.options,d=l.page,c={params:{per_page:l.itemsPerPage,company_id:this.$auth.user.company_id,year:r.getFullYear()}};""!=n&&(c.params[n]=o),this.$axios.get("".concat(t,"?page=").concat(d),c).then((function(t){var data=t.data;if(""!=n&&0==data.data.length)return e.snack=!0,e.snackColor="error",e.snackText="No Results Found",e.loading=!1,!1;e.data=data.data,e.total=data.total,e.loading=!1}))},searchIt:function(e){0==e.length?this.getDataFromApi():e.length>2&&this.getDataFromApi("".concat(this.endpoint,"/search/").concat(e))},editItem:function(e){this.errors=[],this.formTitle="Edit Holidays Information",this.editedIndex=this.data.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},delteteSelectedRecords:function(){var e=this;confirm("Are you sure you wish to delete selected records , to mitigate any inconvenience in future.")&&this.$axios.post("".concat(this.endpoint,"/delete/selected"),{ids:this.ids.map((function(e){return e.id}))}).then((function(t){var data=t.data;data.status?(e.snackbar=data.status,e.ids=[],e.response="Selected records has been deleted"):e.errors=data.errors,e.getDataFromApi()})).catch((function(e){return console.log(e)}))},deleteItem:function(e){var t=this;confirm("Are you sure you wish to delete , to mitigate any inconvenience in future.")&&this.$axios.delete(this.endpoint+"/"+e.id).then((function(e){var data=e.data;data.status?(t.getDataFromApi(),t.snackbar=data.status,t.response=data.message):t.errors=data.errors})).catch((function(e){return console.log(e)}))},close:function(){var e=this;this.dialog=!1,setTimeout((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}),300)},getEmployees:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"employee";this.loading=!0;var n=this.options,o=n.page,r={params:{per_page:n.itemsPerPage,company_id:this.$auth.user.company_id}};this.$axios.get("".concat(t,"?page=").concat(o),r).then((function(t){var data=t.data;e.employees_dialog=data.data}))},save:function(){var e=this;this.editedItem.company_id=this.$auth.user.company_id,this.editedIndex>-1?this.$axios.put(this.endpoint+"/"+this.editedItem.id,this.editedItem).then((function(t){var data=t.data;if(data.status){var n=e.data.findIndex((function(t){return t.id==e.editedItem.id}));e.data.splice(n,1,{id:e.editedItem.id,name:e.editedItem.name}),e.getDataFromApi(),e.snackbar=data.status,e.response=data.message,e.close()}else e.errors=data.errors,e.errors=data.errors,e.snackColor="error",e.snackbar=!0,e.response=data.message})).catch((function(e){return console.log(e)})):this.$axios.post(this.endpoint,this.editedItem).then((function(t){var data=t.data;data.status?(e.getDataFromApi(),e.snackbar=data.status,e.response=data.message,e.close(),e.errors=[],e.search=""):(e.errors=data.errors,e.snackbar=!0,e.snackColor="error",e.response=data.message,e.loading=!1)})).catch((function(e){return console.log(e)}))}}},T=E,F=n(61),component=Object(F.a)(T,(function(){var e=this,t=e._self._c;return e.can("leave_type_access")?t("div",[t("div",{staticClass:"text-center ma-2"},[t(I.a,{attrs:{top:"top",color:e.snackColor,elevation:"24"},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n      "+e._s(e.response)+"\n    ")])],1),e._v(" "),t(h.a,{attrs:{width:"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(r.a,[t(l.d,{staticClass:"primary white--text background",attrs:{dense:""}},[t("span",{staticClass:"headline"},[t("span",{staticClass:"headline"},[e._v(e._s(e.formTitle)+" ")])]),e._v(" "),t(D.a),e._v(" "),t(_.a,{attrs:{outlined:"",dark:"",color:"white"},on:{click:function(t){e.dialog=!1}}},[e._v("\n          mdi mdi-close-circle\n        ")])],1),e._v(" "),t(l.c,[t(c.a,[t(x.a,[t(d.a,{attrs:{cols:"12"}},[t("label",{staticStyle:{"margin-bottom":"5px"},attrs:{for:""}},[e._v("Name")]),e._v(" "),t("br"),e._v(" "),t(w.a,{attrs:{dense:"",outlined:"",placeholder:"Name","error-messages":e.errors&&e.errors.name?e.errors.name[0]:""},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1),e._v(" "),t(d.a,{attrs:{cols:"12"}},[t("label",{staticStyle:{"margin-bottom":"5px"},attrs:{for:"","mb-1":""}},[e._v("Short Name")]),e._v(" "),t(w.a,{attrs:{dense:"",outlined:"",placeholder:"Short Name","error-messages":e.errors&&e.errors.short_name?e.errors.short_name[0]:""},model:{value:e.editedItem.short_name,callback:function(t){e.$set(e.editedItem,"short_name",t)},expression:"editedItem.short_name"}})],1)],1)],1)],1),e._v(" "),t(l.a,[t(D.a),e._v(" "),t(o.a,{staticClass:"primary",attrs:{small:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1),e._v(" "),t(x.a,[t(d.a,{attrs:{md:"12"}},[t(r.a,{staticClass:"mb-5 rounded-md",attrs:{elevation:"0"}},[t(A.a,{staticClass:"rounded-md",attrs:{color:"background",dense:"",flat:"",dark:""}},[t(C.b,[t("span",[e._v(" Dashboard / "+e._s(e.Model)+"s")])]),e._v(" "),t(S.a,{attrs:{top:"",color:"primary"},scopedSlots:e._u([{key:"activator",fn:function(n){var r=n.on,l=n.attrs;return[t(o.a,e._g(e._b({staticClass:"ma-0 px-0",attrs:{dense:"","x-small":"",ripple:!1,text:""}},"v-btn",l,!1),r),[t(_.a,{staticClass:"ml-2",attrs:{color:"white",dark:""},on:{click:function(t){return e.getDataFromApi()}}},[e._v("mdi mdi-reload")])],1)]}}],null,!1,1377685765)},[e._v(" "),t("span",[e._v("Reload")])]),e._v(" "),t(D.a),e._v(" "),e.can("leave_type_create")?t(S.a,{attrs:{top:"",color:"primary"},scopedSlots:e._u([{key:"activator",fn:function(n){var r=n.on,l=n.attrs;return[t(o.a,e._g(e._b({staticClass:"ma-0 px-0",attrs:{dense:"","x-small":"",ripple:!1,text:""}},"v-btn",l,!1),r),[t(_.a,{staticClass:"ml-2",attrs:{color:"white",dark:""},on:{click:function(t){return e.newDialog()}}},[e._v("mdi mdi-plus-circle")])],1)]}}],null,!1,3149403373)},[e._v(" "),t("span",[e._v("Add LeaveType")])]):e._e()],1),e._v(" "),t(I.a,{attrs:{timeout:3e3,color:e.snackColor},scopedSlots:e._u([{key:"action",fn:function(n){var r=n.attrs;return[t(o.a,e._b({attrs:{text:""},on:{click:function(t){e.snack=!1}}},"v-btn",r,!1),[e._v("\n              Close\n            ")])]}}],null,!1,1777906344),model:{value:e.snack,callback:function(t){e.snack=t},expression:"snack"}},[e._v("\n          "+e._s(e.snackText)+"\n\n          ")]),e._v(" "),e.can("leave_type_view")?t(m.a,{staticClass:"elevation-1",attrs:{"item-key":"id",headers:e.headers,items:e.data,loading:e.loading,"footer-props":{itemsPerPageOptions:[10,50,100,500,1e3]}},scopedSlots:e._u([{key:"item.name",fn:function(t){var n=t.item;return[e._v("\n            "+e._s(n.name)+"\n          ")]}},{key:"item.short_name",fn:function(t){var n=t.item;return[e._v("\n            "+e._s(n.short_name)+"\n          ")]}},{key:"item.action",fn:function(n){var r=n.item;return[t(k.a,{attrs:{bottom:"",left:""},scopedSlots:e._u([{key:"activator",fn:function(n){var r=n.on,l=n.attrs;return[t(o.a,e._g(e._b({attrs:{"dark-2":"",icon:""}},"v-btn",l,!1),r),[t(_.a,[e._v("mdi-dots-vertical")])],1)]}}],null,!0)},[e._v(" "),t(v.a,{attrs:{width:"120",dense:""}},[t(f.a,{on:{click:function(t){return e.editItem(r)}}},[t(y.c,{staticStyle:{cursor:"pointer"}},[e.can("leave_type_edit")?t(_.a,{attrs:{color:"secondary",small:""},on:{click:function(t){return e.editItem(r)}}},[e._v("\n                      mdi-pencil\n                    ")]):e._e(),e._v(" Edit\n                  ")],1)],1),e._v(" "),t(f.a,{on:{click:function(t){return e.deleteItem(r)}}},[t(y.c,{staticStyle:{cursor:"pointer"}},[e.can("leave_type_delete")?t(_.a,{attrs:{color:"error",small:""},on:{click:function(t){return e.deleteItem(r)}}},[e._v("\n                      "+e._s("customer"===r.announcement?"":"mdi-delete")+"\n                    ")]):e._e(),e._v(" Delete\n                  ")],1)],1)],1)],1)]}},{key:"no-data",fn:function(){},proxy:!0}],null,!1,410424370),model:{value:e.ids,callback:function(t){e.ids=t},expression:"ids"}}):e._e()],1)],1)],1)],1):t("NoAccess")}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{NoAccess:n(851).default})},850:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return l}));var o=n(95),r=n(0),l=Object(r.k)("v-toolbar__title"),d=Object(r.k)("v-toolbar__items");o.a},851:function(e,t,n){"use strict";n.r(t);var o=n(61),component=Object(o.a)({},(function(){this._self._c;return this._m(0)}),[function(){var e=this._self._c;return e("div",{staticClass:"text-center",staticStyle:{"margin-top":"25%"}},[e("b",[this._v("No Access")])])}],!1,null,null,null);t.default=component.exports}}]);