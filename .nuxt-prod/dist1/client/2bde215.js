(window.webpackJsonp=window.webpackJsonp||[]).push([[114,56],{1282:function(e,t,n){"use strict";n.r(t);var o=n(864),r=n(116),l=n(133),d=n(94),c=n(512),m=n(511),_=n(849),h=n(1220),f=n(1221),v=n(349),y=n(1e3),x=n(115),k=n(208),I=n(329),D=n(26),A=n(835),S=n(510),$=n(846),C=n(348),w=n(218),E=n(877),F=n(95),T=n(850),O=n(829),P=(n(13),n(69),n(882),n(36),n(72),n(33),n(269),n(6),n(57),n(219),n(220),n(35),n(355)),j={components:{TiptapVuetify:P.p},layout:"employee",data:function(){return{datatable_search_textbox:"",filter_employeeid:"",snack:!1,snackColor:"",snackText:"",extensions:[P.g,P.a,P.k,P.i,P.r,P.o,P.j,P.l,P.c,P.m,[P.f,{options:{levels:[1,2,3]}}],P.b,P.k,P.d,P.h,P.n,P.e],content:"\n      <h1>Yay Headlines!</h1>\n      <p>All these <strong>cool tags</strong> are working now.</p>\n        ",scrollInvoked:0,start_menu:!1,end_menu:!1,title:"",des:"",desDate:"",dept:"",options:{},Model:"Announcement",endpoint:"announcement",search:"",snackbar:!1,dialog:!1,ids:[],departments:[],loading:!1,total:0,headers:[{text:"Title",align:"left",sortable:!0,key:"title",value:"title"},{text:"Description",align:"left",sortable:!0,value:"description"},{text:"Start Date",align:"left",sortable:!0,value:"start_date"},{text:"End Date",align:"left",sortable:!0,value:"end_date"}],editedIndex:-1,editedItem:{title:"",description:"",departments:[],employees:[],start_date:null,end_date:null},defaultItem:{title:"",description:"",departments:[],employees:[],start_date:null,end_date:null},response:"",data:[],errors:[],options_dialog:{},employees_dialog:[],selectAllDepartment:!1,selectAllEmployee:!1}},computed:{formTitle:function(){return-1===this.editedIndex?"New":"Edit"},getCurrentDate:function(){var e=new Date,t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(o)},isIndeterminateDepartment:function(){return this.editedItem.departments.length>0&&this.editedItem.departments.length<this.departments.length},isIndeterminateEmployee:function(){return this.editedItem.employees.length>0&&this.editedItem.employees.length<this.employees_dialog.length}},watch:{selectAllDepartment:function(e){this.editedItem.departments=e?this.departments.map((function(e){return e.id})):[]},selectAllEmployee:function(e){this.editedItem.employees=e?this.employees_dialog.map((function(e){return e.id})):[]},dialog:function(e){e||this.close(),this.errors=[],this.search=""},options:{handler:function(){},deep:!0}},created:function(){this.loading=!0,this.getDataFromApi(),this.getDepartments(),this.getEmployees()},methods:{datatable_cancel:function(){this.datatable_search_textbox=""},datatable_open:function(){this.datatable_search_textbox=""},datatable_close:function(){this.loading=!1},toggleDepartmentSelection:function(){this.selectAllDepartment=!this.selectAllDepartment},toggleEmployeeSelection:function(){this.selectAllEmployee=!this.selectAllEmployee},can:function(e){var u=this.$auth.user;return u&&u.permissions.some((function(t){return t==e||"/"==e}))||u.is_master},onScroll:function(){this.scrollInvoked++},getDepartments:function(){var e=this,t={params:{per_page:1e3,company_id:this.$auth.user.company_id}};this.$axios.get("departments",t).then((function(t){var data=t.data;e.departments=data.data}))},employeesByDepartment:function(){var e=this;this.loading_dialog=!0;var t=this.options_dialog,n=t.page,o=t.itemsPerPage,r={params:{department_ids:this.editedItem.departments,per_page:o,page:n,company_id:this.$auth.user.company_id}};this.editedItem.departments.length?this.$axios.get("employeesByDepartment",r).then((function(t){var data=t.data;e.employees_dialog=data.data,e.loading_dialog=!1})):this.getEmployees()},getDataFromApi:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.endpoint,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";""==t&&(t=this.endpoint),this.loading=!0;var r=this.options,l=r.page,d=r.itemsPerPage,c=this.$auth.user.company_id,m=d;""!=n&&(options.params[n]=o),this.$axios.get("employee-announcements/".concat(this.$auth.user.employee.id,"?page=").concat(l||1,"&company_id=").concat(c,"&per_page=").concat(m||1e3)).then((function(t){var data=t.data;if(""!=n&&0==data.data.length)return e.snack=!0,e.snackColor="error",e.snackText="No Results Found",e.loading=!1,!1;e.data=data.data,e.total=data.total,e.loading=!1}))},searchIt:function(e){0==e.length?this.getDataFromApi():e.length>2&&this.getDataFromApi("".concat(this.endpoint,"/search/").concat(e))},editItem:function(e){this.editedIndex=this.data.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0,this.editedItem.departments=e.departments.map((function(e){return e.id})),this.editedItem.employees=e.employees.map((function(e){return e.id}))},delteteSelectedRecords:function(){var e=this;confirm("Are you sure you wish to delete selected records , to mitigate any inconvenience in future.")&&this.$axios.post("".concat(this.endpoint,"/delete/selected"),{ids:this.ids.map((function(e){return e.id}))}).then((function(t){var data=t.data;data.status?(e.snackbar=data.status,e.ids=[],e.response="Selected records has been deleted"):e.errors=data.errors,e.getDataFromApi()})).catch((function(e){return console.log(e)}))},deleteItem:function(e){var t=this;confirm("Are you sure you wish to delete , to mitigate any inconvenience in future.")&&this.$axios.delete(this.endpoint+"/"+e.id).then((function(e){var data=e.data;data.status?(t.getDataFromApi(),t.snackbar=data.status,t.response=data.message):t.errors=data.errors})).catch((function(e){return console.log(e)}))},close:function(){var e=this;this.dialog=!1,setTimeout((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}),300)},getEmployees:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"employee";this.loading=!0;var n=this.options,o=n.page,r={params:{per_page:n.itemsPerPage,company_id:this.$auth.user.company_id}};this.$axios.get("".concat(t,"?page=").concat(o),r).then((function(t){var data=t.data;e.employees_dialog=data.data}))},save:function(){var e=this;this.editedItem.company_id=this.$auth.user.company_id,this.editedIndex>-1?this.$axios.put(this.endpoint+"/"+this.editedItem.id,this.editedItem).then((function(t){var data=t.data;if(data.status){var n=e.data.findIndex((function(t){return t.id==e.editedItem.id}));e.data.splice(n,1,{id:e.editedItem.id,name:e.editedItem.name}),e.getDataFromApi(),e.snackbar=data.status,e.response=data.message,e.close()}else e.errors=data.errors})).catch((function(e){return console.log(e)})):this.$axios.post(this.endpoint,this.editedItem).then((function(t){var data=t.data;data.status?(e.getDataFromApi(),e.snackbar=data.status,e.response=data.message,e.close(),e.errors=[],e.search=""):e.errors=data.errors})).catch((function(e){return console.log(e)}))}}},M=j,N=n(61),component=Object(N.a)(M,(function(){var e=this,t=e._self._c;return e.can("announcement_access")?t("div",[t("div",{staticClass:"text-center ma-2"},[t($.a,{attrs:{top:"top",color:"secondary",elevation:"24"},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n      "+e._s(e.response)+"\n    ")])],1),e._v(" "),t(v.a,{attrs:{"max-width":"60%"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(l.a,[t(d.d,[t("span",{staticClass:"headline"},[e._v(e._s(e.formTitle)+" "+e._s(e.Model))])]),e._v(" "),t(d.c,[t(_.a,[t(S.a,[t(m.a,{attrs:{cols:"4"}},[t("label",{attrs:{for:""}},[e._v("Title")]),e._v(" "),t(w.a,{attrs:{dense:"",outlined:"",placeholder:"Title","error-messages":e.errors&&e.errors.title?e.errors.title[0]:""},model:{value:e.editedItem.title,callback:function(t){e.$set(e.editedItem,"title",t)},expression:"editedItem.title"}})],1),e._v(" "),t(m.a,{attrs:{cols:"4"}},[t("label",{attrs:{for:""}},[e._v("Department")]),e._v(" "),t(o.a,{staticStyle:{height:"50px",overflow:"hidden"},attrs:{items:e.departments,multiple:"","item-text":"name","item-value":"id",placeholder:"Departments","error-messages":e.errors&&e.errors.departments?e.errors.departments[0]:"",color:"background"},on:{change:e.employeesByDepartment},scopedSlots:e._u([e.departments.length?{key:"prepend-item",fn:function(){return[t(k.a,{on:{click:e.toggleDepartmentSelection}},[t(I.a,[t(c.a,{attrs:{indeterminate:e.isIndeterminateDepartment,"true-value":!0,"false-value":!1},model:{value:e.selectAllDepartment,callback:function(t){e.selectAllDepartment=t},expression:"selectAllDepartment"}})],1),e._v(" "),t(D.a,[t(D.c,[e._v("\n                        "+e._s(e.selectAllDepartment?"Unselect All":"Select All")+"\n                      ")])],1)],1)]},proxy:!0}:null],null,!0),model:{value:e.editedItem.departments,callback:function(t){e.$set(e.editedItem,"departments",t)},expression:"editedItem.departments"}})],1),e._v(" "),t(m.a,{attrs:{cols:"4"}},[t("label",{attrs:{for:""}},[e._v("Employee")]),e._v(" "),t(o.a,{staticStyle:{height:"50px",overflow:"hidden"},attrs:{items:e.employees_dialog,multiple:"","item-text":"name_with_user_id","item-value":"id",placeholder:"Employees","error-messages":e.errors&&e.errors.employees?e.errors.employees[0]:"",color:"background"},scopedSlots:e._u([e.employees_dialog.length?{key:"prepend-item",fn:function(){return[t(k.a,{on:{click:e.toggleEmployeeSelection}},[t(I.a,[t(c.a,{attrs:{indeterminate:e.isIndeterminateEmployee,"true-value":!0,"false-value":!1},model:{value:e.selectAllEmployee,callback:function(t){e.selectAllEmployee=t},expression:"selectAllEmployee"}})],1),e._v(" "),t(D.a,[t(D.c,[e._v("\n                        "+e._s(e.selectAllEmployee?"Unselect All":"Select All")+"\n                      ")])],1)],1)]},proxy:!0}:null],null,!0),model:{value:e.editedItem.employees,callback:function(t){e.$set(e.editedItem,"employees",t)},expression:"editedItem.employees"}})],1),e._v(" "),t(m.a,{attrs:{cols:"6"}},[t(A.a,{ref:"from_menu",attrs:{"close-on-content-click":!1,"return-value":e.editedItem.start_date,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(t){return e.$set(e.editedItem,"start_date",t)},"update:return-value":function(t){return e.$set(e.editedItem,"start_date",t)}},scopedSlots:e._u([{key:"activator",fn:function(n){var o=n.on,r=n.attrs;return[t("div",{staticClass:"mb-1"},[e._v("Start Date")]),e._v(" "),t(w.a,e._g(e._b({attrs:{outlined:"",dense:"",readonly:"","error-messages":e.errors&&e.errors.start_date?e.errors.start_date[0]:""},model:{value:e.editedItem.start_date,callback:function(t){e.$set(e.editedItem,"start_date",t)},expression:"editedItem.start_date"}},"v-text-field",r,!1),o))]}}],null,!1,1178926747),model:{value:e.start_menu,callback:function(t){e.start_menu=t},expression:"start_menu"}},[e._v(" "),t(f.a,{attrs:{"no-title":"",scrollable:""},model:{value:e.editedItem.start_date,callback:function(t){e.$set(e.editedItem,"start_date",t)},expression:"editedItem.start_date"}},[t(C.a),e._v(" "),t(r.a,{attrs:{text:"",color:"primary"},on:{click:function(t){e.from_menu=!1}}},[e._v("\n                    Cancel\n                  ")]),e._v(" "),t(r.a,{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.from_menu.save(e.editedItem.start_date)}}},[e._v("\n                    OK\n                  ")])],1)],1)],1),e._v(" "),t(m.a,{attrs:{cols:"6"}},[t(A.a,{ref:"end_menu",attrs:{"close-on-content-click":!1,"return-value":e.editedItem.end_date,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(t){return e.$set(e.editedItem,"end_date",t)},"update:return-value":function(t){return e.$set(e.editedItem,"end_date",t)}},scopedSlots:e._u([{key:"activator",fn:function(n){var o=n.on,r=n.attrs;return[t("div",{staticClass:"mb-1"},[e._v("End Date")]),e._v(" "),t(w.a,e._g(e._b({attrs:{outlined:"",dense:"",readonly:"","error-messages":e.errors&&e.errors.end_date?e.errors.end_date[0]:""},model:{value:e.editedItem.end_date,callback:function(t){e.$set(e.editedItem,"end_date",t)},expression:"editedItem.end_date"}},"v-text-field",r,!1),o))]}}],null,!1,3363844155),model:{value:e.end_menu,callback:function(t){e.end_menu=t},expression:"end_menu"}},[e._v(" "),t(f.a,{attrs:{min:e.editedItem.start_date,"no-title":"",scrollable:""},model:{value:e.editedItem.end_date,callback:function(t){e.$set(e.editedItem,"end_date",t)},expression:"editedItem.end_date"}},[t(C.a),e._v(" "),t(r.a,{attrs:{text:"",color:"primary"},on:{click:function(t){e.end_menu=!1}}},[e._v("\n                    Cancel\n                  ")]),e._v(" "),t(r.a,{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.end_menu.save(e.editedItem.end_date)}}},[e._v("\n                    OK\n                  ")])],1)],1)],1),e._v(" "),t(m.a,{attrs:{cols:"12"}},[t("label",{attrs:{for:""}},[e._v("Description")]),e._v(" "),t(E.a,{attrs:{dense:"",outlined:"","error-messages":e.errors&&e.errors.description?e.errors.description[0]:""},model:{value:e.editedItem.description,callback:function(t){e.$set(e.editedItem,"description",t)},expression:"editedItem.description"}})],1)],1)],1)],1),e._v(" "),t(d.a,[t(C.a),e._v(" "),t(r.a,{staticClass:"error",attrs:{small:""},on:{click:e.close}},[e._v(" Cancel ")]),e._v(" "),t(r.a,{staticClass:"primary",attrs:{small:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1),e._v(" "),t(S.a,[t(m.a,{attrs:{md:"12"}},[t(l.a,{staticClass:"mb-5 rounded-md",attrs:{elevation:"0"}},[t(F.a,{staticClass:"rounded-md",attrs:{color:"background",dense:"",flat:"",dark:""}},[t(T.b,[t("span",[e._v(" "+e._s(e.Model)+" List")])]),e._v(" "),t(O.a,{attrs:{top:"",color:"primary"},scopedSlots:e._u([{key:"activator",fn:function(n){var o=n.on,l=n.attrs;return[t(r.a,e._g(e._b({staticClass:"ma-0 px-0",attrs:{dense:"","x-small":"",ripple:!1,text:""}},"v-btn",l,!1),o),[t(x.a,{staticClass:"ml-2",attrs:{color:"white",dark:""},on:{click:function(t){return e.getDataFromApi()}}},[e._v("mdi mdi-reload")])],1)]}}],null,!1,1377685765)},[e._v(" "),t("span",[e._v("Reload")])]),e._v(" "),t(C.a),e._v(" "),t(T.a,[t(m.a,{staticClass:"toolbaritems-button-design1"},[e.can("announcement_create")?t(r.a,{staticClass:"mb-2",attrs:{small:"",color:"primary"},on:{click:function(t){e.dialog=!0}}},[e._v(e._s(e.Model)+" +")]):e._e()],1)],1)],1),e._v(" "),t($.a,{attrs:{timeout:3e3,color:e.snackColor},scopedSlots:e._u([{key:"action",fn:function(n){var o=n.attrs;return[t(r.a,e._b({attrs:{text:""},on:{click:function(t){e.snack=!1}}},"v-btn",o,!1),[e._v(" Close ")])]}}],null,!1,3090489768),model:{value:e.snack,callback:function(t){e.snack=t},expression:"snack"}},[e._v("\n          "+e._s(e.snackText)+"\n\n          ")]),e._v(" "),e.can("announcement_view")?t(h.a,{staticClass:"elevation-1",attrs:{"item-key":"id",headers:e.headers,items:e.data,loading:e.loading,"footer-props":{itemsPerPageOptions:[10,50,100,500,1e3]}},scopedSlots:e._u([{key:"item.title",fn:function(n){var o=n.item;return[t(y.a,{staticStyle:{"margin-left":"4%"},attrs:{large:"","save-text":"Reset","cancel-text":"Ok"},on:{save:function(t){return e.getDataFromApi()},open:e.datatable_open},scopedSlots:e._u([{key:"input",fn:function(){return[t(w.a,{attrs:{label:"Search Title"},on:{input:function(t){return e.getDataFromApi("","title",t)}},model:{value:e.datatable_search_textbox,callback:function(t){e.datatable_search_textbox=t},expression:"datatable_search_textbox"}})]},proxy:!0}],null,!0)},[e._v("\n              "+e._s(o.title)+"\n              ")])]}},{key:"item.description",fn:function(n){var o=n.item;return[t(y.a,{staticStyle:{"margin-left":"4%"},attrs:{large:"","save-text":"Reset","cancel-text":"Ok"},on:{save:function(t){return e.getDataFromApi()},open:e.datatable_open},scopedSlots:e._u([{key:"input",fn:function(){return[t(w.a,{attrs:{label:"Search Description"},on:{input:function(t){return e.getDataFromApi("","description",t)}},model:{value:e.datatable_search_textbox,callback:function(t){e.datatable_search_textbox=t},expression:"datatable_search_textbox"}})]},proxy:!0}],null,!0)},[t("div",{staticClass:"pa-2",staticStyle:{width:"300px"}},[e._v("\n                "+e._s(o.description)+"\n              ")])])]}},{key:"no-data",fn:function(){},proxy:!0}],null,!1,2003081033),model:{value:e.ids,callback:function(t){e.ids=t},expression:"ids"}}):e._e()],1)],1)],1)],1):t("NoAccess")}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{NoAccess:n(851).default})},851:function(e,t,n){"use strict";n.r(t);var o=n(61),component=Object(o.a)({},(function(){this._self._c;return this._m(0)}),[function(){var e=this._self._c;return e("div",{staticClass:"text-center",staticStyle:{"margin-top":"25%"}},[e("b",[this._v("No Access")])])}],!1,null,null,null);t.default=component.exports}}]);