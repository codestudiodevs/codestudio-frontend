(window.webpackJsonp=window.webpackJsonp||[]).push([[136,56],{1248:function(e,t,n){"use strict";n.r(t);var o=n(116),r=n(133),c=n(94),l=n(511),d=n(849),m=n(1220),_=n(349),v=n(115),h=n(327),f=n(208),k=n(26),y=n(835),x=n(510),I=n(846),w=n(348),D=n(218),A=n(95),C=n(850),S=n(829),E=(n(35),n(6),n(36),n(72),n(57),n(219),n(33),n(269),n(355)),$={components:{TiptapVuetify:E.p},data:function(){return{attrs:{},leaveTypes:[],designations:[],formTitle:"New Leave Group",dialogEmployees:!1,idsEmployeeList:[],datatable_search_textbox:"",filter_employeeid:"",snack:!1,snackColor:"",snackText:"",extensions:[E.g,E.a,E.k,E.i,E.r,E.o,E.j,E.l,E.c,E.m,[E.f,{options:{levels:[1,2,3]}}],E.b,E.k,E.d,E.h,E.n,E.e],content:"\n      <h1>Yay Headlines!</h1>\n      <p>All these <strong>cool tags</strong> are working now.</p>\n        ",scrollInvoked:0,start_menu:!1,end_menu:!1,title:"",des:"",desDate:"",dept:"",options:{},Model:"Leaves Group",endpoint:"leave_groups",search:"",snackbar:!1,dialog:!1,ids:[],departments:[],loading:!1,total:0,headers:[{text:"Group Name",align:"left",sortable:!0,value:"group_name"},{text:"Leave Types",align:"left",sortable:!0,key:"name",value:"leave_count"},{text:"Actions",align:"center",value:"action",sortable:!1}],editedIndex:-1,editedItem:{group_name:""},defaultItem:{group_name:""},response:"",data:[],errors:[],options_dialog:{},employees_dialog:[],selectAllDepartment:!1,selectAllEmployee:!1,DialogEmployeesData:{}}},computed:{},watch:{},created:function(){this.loading=!0,this.getDataFromApi()},methods:{update_EdititemStart:function(){this.$refs.from_menu.save(this.editedItem.start_date),this.from_menu=!1,this.getDayscount()},update_EdititemEnd:function(){this.$refs.end_menu.save(this.editedItem.end_date),this.end_menu=!1,this.getDayscount()},gotoDialogPage:function(e){this.DialogEmployeesData=e.employees,this.dialogEmployees=!0},datatable_save:function(){},datatable_cancel:function(){this.datatable_search_textbox=""},datatable_open:function(){this.datatable_search_textbox=""},datatable_close:function(){this.loading=!1},toggleDepartmentSelection:function(){this.selectAllDepartment=!this.selectAllDepartment},toggleEmployeeSelection:function(){this.selectAllEmployee=!this.selectAllEmployee},can:function(e){var u=this.$auth.user;return u&&u.permissions.some((function(t){return t==e||"/"==e}))||u.is_master},onScroll:function(){this.scrollInvoked++},getDataFromApi:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.endpoint,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";""==t&&(t=this.endpoint),this.loading=!0;var r=new Date,c=this.options,l=c.page,d={params:{per_page:c.itemsPerPage,company_id:this.$auth.user.company_id,year:r.getFullYear()}};""!=n&&(d.params[n]=o),this.$axios.get("".concat(t,"?page=").concat(l),d).then((function(t){var data=t.data;if(""!=n&&0==data.data.length)return e.snack=!0,e.snackColor="error",e.snackText="No Results Found",e.loading=!1,!1;e.data=data.data,e.total=data.total,e.loading=!1}))},searchIt:function(e){0==e.length?this.getDataFromApi():e.length>2&&this.getDataFromApi("".concat(this.endpoint,"/search/").concat(e))},editItem:function(e){this.formTitle="Edit Group Name",this.editedIndex=this.data.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0,this.error=[]},viewItem:function(e){this.$router.push("/leavecount/"+e.id)},delteteSelectedRecords:function(){var e=this;confirm("Are you sure you wish to delete selected records , to mitigate any inconvenience in future.")&&this.$axios.post("".concat(this.endpoint,"/delete/selected"),{ids:this.ids.map((function(e){return e.id}))}).then((function(t){var data=t.data;data.status?(e.snackbar=data.status,e.ids=[],e.response="Selected records has been deleted"):e.errors=data.errors,e.getDataFromApi()})).catch((function(e){return console.log(e)}))},deleteItem:function(e){var t=this;confirm("Are you sure you wish to delete , to mitigate any inconvenience in future.")&&this.$axios.delete(this.endpoint+"/"+e.id).then((function(e){var data=e.data;data.status?(t.getDataFromApi(),t.snackbar=data.status,t.response=data.message):t.errors=data.errors})).catch((function(e){return console.log(e)}))},close:function(){var e=this;this.dialog=!1,setTimeout((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}),300)},save:function(){var e=this,t={params:{company_id:this.$auth.user.company_id,group_name:this.editedItem.group_name}};this.editedItem.company_id=this.$auth.user.company_id,this.editedIndex>-1?this.$axios.put(this.endpoint+"/"+this.editedItem.id,t.params).then((function(t){var data=t.data;if(data.status){e.data.findIndex((function(t){return t.id==e.editedItem.id}));e.getDataFromApi(),e.snackbar=data.status,e.response=data.message,e.close()}else e.errors=data.errors,e.errors=data.errors,e.snackColor="error",e.snackbar=!0,e.response=data.message})).catch((function(e){return console.log(e)})):this.$axios.post(this.endpoint,this.editedItem).then((function(t){var data=t.data;data.status?(e.getDataFromApi(),e.snackbar=data.status,e.response=data.message,e.close(),e.errors=[],e.search=""):(e.errors=data.errors,e.snackColor="error",e.snackbar=!0,e.response=data.message,e.close(),e.errors=[],e.search="")})).catch((function(e){return console.log(e)}))}}},F=$,T=n(61),component=Object(T.a)(F,(function(){var e=this,t=e._self._c;return e.can("leave_group_access")?t("div",[t("div",{staticClass:"text-center ma-2"},[t(I.a,{attrs:{top:"top",color:e.snackColor,elevation:"24"},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n      "+e._s(e.response)+"\n    ")])],1),e._v(" "),t(_.a,{attrs:{width:"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(r.a,[t(c.d,{staticClass:"primary white--text background",attrs:{dense:""}},[t("span",[e._v(e._s(e.formTitle)+" ")]),e._v(" "),t(w.a),e._v(" "),t(v.a,{attrs:{outlined:"",dark:"",color:"white"},on:{click:function(t){e.dialog=!1}}},[e._v("\n          mdi mdi-close-circle\n        ")])],1),e._v(" "),t(c.c,[t(d.a,[t(x.a,[t(l.a,{attrs:{cols:"12"}},[t("label",{staticStyle:{"margin-bottom":"5px"},attrs:{for:""}},[e._v("Group Name")]),e._v(" "),t(D.a,e._b({attrs:{outlined:"",dense:"","error-messages":e.errors&&e.errors.group_name?e.errors.group_name[0]:""},model:{value:e.editedItem.group_name,callback:function(t){e.$set(e.editedItem,"group_name",t)},expression:"editedItem.group_name"}},"v-text-field",e.attrs,!1))],1)],1)],1)],1),e._v(" "),t(c.a,[t(w.a),e._v(" "),t(o.a,{staticClass:"primary",attrs:{small:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1),e._v(" "),t(x.a,[t(l.a,{attrs:{md:"12"}},[t(r.a,{staticClass:"mb-5 rounded-md",attrs:{elevation:"0"}},[t(A.a,{staticClass:"rounded-md",attrs:{color:"background",dense:"",flat:"",dark:""}},[t(C.b,[t("span",[e._v(" Dashboard / Leave Groups List")])]),e._v(" "),t(S.a,{attrs:{top:"",color:"primary"},scopedSlots:e._u([{key:"activator",fn:function(n){var r=n.on,c=n.attrs;return[t(o.a,e._g(e._b({staticClass:"ma-0 px-0",attrs:{dense:"","x-small":"",ripple:!1,text:""}},"v-btn",c,!1),r),[t(v.a,{staticClass:"ml-2",attrs:{color:"white",dark:""},on:{click:function(t){return e.getDataFromApi()}}},[e._v("mdi mdi-reload")])],1)]}}],null,!1,1377685765)},[e._v(" "),t("span",[e._v("Reload")])]),e._v(" "),t(w.a),e._v(" "),e.can("leave_group_create")?t(S.a,{attrs:{top:"",color:"primary"},scopedSlots:e._u([{key:"activator",fn:function(n){var r=n.on,c=n.attrs;return[t(o.a,e._g(e._b({staticClass:"ma-0 px-0",attrs:{dense:"","x-small":"",ripple:!1,text:""}},"v-btn",c,!1),r),[t(v.a,{staticClass:"ml-2",attrs:{color:"white",dark:""},on:{click:function(t){e.dialog=!0}}},[e._v("mdi mdi-plus-circle")])],1)]}}],null,!1,2410431889)},[e._v(" "),t("span",[e._v("New LeaveGroup")])]):e._e()],1),e._v(" "),t(I.a,{attrs:{timeout:3e3,color:e.snackColor},scopedSlots:e._u([{key:"action",fn:function(n){var r=n.attrs;return[t(o.a,e._b({attrs:{text:""},on:{click:function(t){e.snack=!1}}},"v-btn",r,!1),[e._v("\n              Close\n            ")])]}}],null,!1,1777906344),model:{value:e.snack,callback:function(t){e.snack=t},expression:"snack"}},[e._v("\n          "+e._s(e.snackText)+"\n\n          ")]),e._v(" "),e.can("leave_group_view")?t(m.a,{staticClass:"elevation-1",attrs:{"item-key":"id",headers:e.headers,items:e.data,loading:e.loading,"footer-props":{itemsPerPageOptions:[10,50,100,500,1e3]}},scopedSlots:e._u([{key:"item.group_name.name",fn:function(t){var n=t.item;return[e._v("\n            "+e._s(n.group_name)+"\n          ")]}},{key:"item.leave_count",fn:function(n){var o=n.item;return e._l(o.leave_count,(function(n,o){return t("div",{key:o},[e._v("\n              "+e._s(n.leave_type.name)+" : "+e._s(n.leave_type_count)+"\n            ")])}))}},{key:"item.action",fn:function(n){var r=n.item;return[t(y.a,{attrs:{bottom:"",left:""},scopedSlots:e._u([{key:"activator",fn:function(n){var r=n.on,c=n.attrs;return[t(o.a,e._g(e._b({attrs:{"dark-2":"",icon:""}},"v-btn",c,!1),r),[t(v.a,[e._v("mdi-dots-vertical")])],1)]}}],null,!0)},[e._v(" "),t(h.a,{attrs:{width:"120",dense:""}},[t(f.a,{on:{click:function(t){return e.viewItem(r)}}},[t(k.c,{staticStyle:{cursor:"pointer"}},[e.can("leave_group_view")?t(v.a,{attrs:{color:"primary",small:""},on:{click:function(t){return e.viewItem(r)}}},[e._v("\n                      mdi-eye\n                    ")]):e._e(),e._v(" View\n                  ")],1)],1),e._v(" "),t(f.a,{on:{click:function(t){return e.editItem(r)}}},[t(k.c,{staticStyle:{cursor:"pointer"}},[e.can("leave_group_edit")?t(v.a,{attrs:{color:"secondary",small:""},on:{click:function(t){return e.editItem(r)}}},[e._v("\n                      mdi-pencil\n                    ")]):e._e(),e._v(" Edit\n                  ")],1)],1),e._v(" "),t(f.a,{on:{click:function(t){return e.deleteItem(r)}}},[t(k.c,{staticStyle:{cursor:"pointer"}},[e.can("leave_group_delete")?t(v.a,{attrs:{color:"error",small:""},on:{click:function(t){return e.deleteItem(r)}}},[e._v("\n                      "+e._s("customer"===r.announcement?"":"mdi-delete")+"\n                    ")]):e._e(),e._v(" Delete\n                  ")],1)],1)],1)],1)]}},{key:"no-data",fn:function(){},proxy:!0}],null,!1,3270034508),model:{value:e.ids,callback:function(t){e.ids=t},expression:"ids"}}):e._e()],1)],1)],1)],1):t("NoAccess")}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{NoAccess:n(851).default})},850:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c}));var o=n(95),r=n(0),c=Object(r.k)("v-toolbar__title"),l=Object(r.k)("v-toolbar__items");o.a},851:function(e,t,n){"use strict";n.r(t);var o=n(61),component=Object(o.a)({},(function(){this._self._c;return this._m(0)}),[function(){var e=this._self._c;return e("div",{staticClass:"text-center",staticStyle:{"margin-top":"25%"}},[e("b",[this._v("No Access")])])}],!1,null,null,null);t.default=component.exports}}]);