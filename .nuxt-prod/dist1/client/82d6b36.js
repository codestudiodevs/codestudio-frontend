(window.webpackJsonp=window.webpackJsonp||[]).push([[153,56],{1293:function(e,t,n){"use strict";n.r(t);var o=n(116),r=n(511),c=n(1220),l=n(836),d=n(115),h=n(510),v=n(846),m=n(218),f=n(95),_=n(850),x=(n(33),n(269),n(36),n(353),n(72),n(220),n(57),n(35),n(219),{layout:function(e){var t=e.$auth.user.user_type;return"master"==t?"master":"employee"==t?"employee":"master"==t?"default":void 0},data:function(){return{options:{},endpoint:"device",search:"",snackbar:!1,dialog:!1,ids:[],loading:!1,total:0,headers:[{text:"Name",align:"left",value:"name",sortable:!1},{text:"Device Id",align:"left",value:"device_id",sortable:!1},{text:"Status",align:"left",value:"status.name",sortable:!1},{text:"Company",align:"left",value:"company.name",sortable:!1},{text:"Location",align:"left",value:"location",sortable:!1},{text:"Actions",align:"center",value:"action",sortable:!1}],editedIndex:-1,editedItem:{name:""},defaultItem:{name:""},response:"",devices:[],errors:[]}},computed:{formTitle:function(){return-1===this.editedIndex?"New device":"Edit device"}},watch:{dialog:function(e){e||this.close(),this.errors=[],this.search=""},options:{handler:function(){this.getDataFromApi()},deep:!0}},created:function(){this.loading=!0},methods:{can:function(e){var u=this.$auth.user;return u&&u.user_type==e},getDataFromApi:function(){var e,t,n=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.endpoint;this.loading=!0;var r=this.options,c=r.sortBy,l=r.sortDesc,d=r.page,h={params:{per_page:r.itemsPerPage,company_id:null===(e=this.$auth.user)||void 0===e||null===(t=e.company)||void 0===t?void 0:t.id}};this.$axios.get("".concat(o,"?page=").concat(d),h).then((function(e){var data=e.data,t=data.data;1===c.length&&1===l.length&&(t=n.sorting(t,c,l)),n.devices=t,n.total=data.total,n.loading=!1}))},sorting:function(e,t,n){return e.sort((function(a,b){var e=a[t[0]],o=b[t[0]];return n[0]?e<o?1:e>o?-1:0:e<o?-1:e>o?1:0}))},searchIt:function(e){0==e.length?this.getDataFromApi():e.length>2&&this.getDataFromApi("".concat(this.endpoint,"/search/").concat(e))},editItem:function(e){this.$router.push("/master/device/".concat(e))},delteteSelectedRecords:function(){var e=this,t=this.ids.map((function(e){return e.id}));confirm("Are you sure you wish to delete selected records , to mitigate any inconvenience in future.")&&this.$axios.post("".concat(this.endpoint,"/delete/selected"),{ids:t}).then((function(t){var data=t.data;data.status?(e.getDataFromApi(),e.snackbar=data.status,e.ids=[],e.response="Selected records has been deleted"):e.errors=data.errors})).catch((function(e){return console.log(e)}))},deleteItem:function(e){var t=this;confirm("Are you sure you wish to delete , to mitigate any inconvenience in future.")&&this.$axios.delete(this.endpoint+"/"+e.id).then((function(n){var data=n.data,o=t.devices.indexOf(e);t.devices.splice(o,1),t.snackbar=data.status,t.response=data.message})).catch((function(e){return console.log(e)}))},close:function(){var e=this;this.dialog=!1,setTimeout((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}),300)},save:function(){var e=this,t={name:this.editedItem.name.toLowerCase()};this.editedIndex>-1?this.$axios.put(this.endpoint+"/"+this.editedItem.id,t).then((function(t){if(t.data.status){var n=e.devices.findIndex((function(t){return t.id==e.editedItem.id}));e.devices.splice(n,1,{id:e.editedItem.id,name:e.editedItem.name}),e.snackbar=t.data.status,e.response=t.data.message,e.close()}else e.errors=t.data.errors})).catch((function(e){return console.log(e)})):this.$axios.post(this.endpoint,t).then((function(t){t.data.status?(e.getDataFromApi(),e.snackbar=t.data.status,e.response=t.data.message,e.close(),e.errors=[],e.search=""):e.errors=t.data.errors})).catch((function(e){return console.log(e)}))}}}),y=x,k=n(61),component=Object(k.a)(y,(function(){var e=this,t=e._self._c;return e.can("master")?t("div",[t("div",{staticClass:"text-center ma-2"},[t(v.a,{attrs:{top:"top",color:"secondary",elevation:"24"},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n      "+e._s(e.response)+"\n    ")])],1),e._v(" "),t(h.a,{staticClass:""},[t(r.a,{attrs:{cols:"6"}},[t("h3",[e._v("device")]),e._v(" "),t("div",[e._v("Dashboard / device")])]),e._v(" "),t(r.a,{attrs:{cols:"6"}},[t("div",{staticClass:"text-right"},[t(o.a,{staticClass:"mr-2 mb-2",attrs:{small:"",color:"error"},on:{click:e.delteteSelectedRecords}},[e._v("Delete Selected Records")]),e._v(" "),t(o.a,{staticClass:"mb-2",attrs:{small:"",color:"primary",to:"/device/create"}},[e._v("device +")])],1)])],1),e._v(" "),t(c.a,{staticClass:"elevation-1",attrs:{"show-select":"","item-key":"id",headers:e.headers,items:e.devices,"server-items-length":e.total,loading:e.loading,options:e.options,"footer-props":{itemsPerPageOptions:[50,100,500,1e3]}},on:{"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"top",fn:function(){return[t(f.a,{attrs:{flat:"",color:""}},[t(_.b,[e._v("List")]),e._v(" "),t(l.a,{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),e._v(" "),t(m.a,{attrs:{label:"Search","single-line":"","hide-details":""},on:{input:e.searchIt},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)]},proxy:!0},{key:"item.action",fn:function(n){var o=n.item;return[t(d.a,{staticClass:"mr-2",attrs:{color:"secondary",small:""},on:{click:function(t){return e.editItem(o.id)}}},[e._v("\n        mdi-pencil\n      ")]),e._v(" "),t(d.a,{attrs:{color:"error",small:""},on:{click:function(t){return e.deleteItem(o)}}},[e._v("\n        "+e._s("customer"===o.device?"":"mdi-delete")+"\n      ")])]}},{key:"no-data",fn:function(){},proxy:!0}],null,!1,3693888912),model:{value:e.ids,callback:function(t){e.ids=t},expression:"ids"}})],1):t("NoAccess")}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{NoAccess:n(851).default})},850:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c}));var o=n(95),r=n(0),c=Object(r.k)("v-toolbar__title"),l=Object(r.k)("v-toolbar__items");o.a},851:function(e,t,n){"use strict";n.r(t);var o=n(61),component=Object(o.a)({},(function(){this._self._c;return this._m(0)}),[function(){var e=this._self._c;return e("div",{staticClass:"text-center",staticStyle:{"margin-top":"25%"}},[e("b",[this._v("No Access")])])}],!1,null,null,null);t.default=component.exports}}]);